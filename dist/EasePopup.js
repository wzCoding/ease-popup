var EasePopup;(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>f});const o={direction:"top",width:"auto",placement:"outside",useCache:!1,needArrow:!0,arrowSize:10,gap:5,offset:[10,10],theme:"light",transition:{enter:"animate__animated animate__fadeIn",leave:"animate__animated animate__fadeOut"}},r={popup:[".popup",["position","absolute"],["z-index","2"],["box-shadow","0px 0px 6px rgba(0, 0, 0, 0.2)"],["border-radius","4px"],["padding","8px"],["background-color","var(--popup-background)"],["color","var(--popup-color)"],["width","var(--popup-width)"],["display","none"],["transform","translate(var(--popup-x), var(--popup-y))"],["box-sizing","border-box"]],arrow:[".popup.arrow-popup::after",["content","''"],["display","block"],["z-index","-1"],["position","absolute"],["left","var(--arrow-x)"],["top","var(--arrow-y)"],["background-color","var(--popup-background)"],["width","var(--arrow-size)"],["height","var(--arrow-size)"],["transform"," rotate(var(--arrow-rotate))"],["box-shadow","-1px 1px 1px rgba(0, 0, 0, 0.1)"]]},p={light:{background:"#ffffff",color:"#333333"},dark:{background:"#333333",color:"#ffffff"}},i=window.innerWidth,n=window.innerHeight,s=["top","top-start","top-end","center","bottom","bottom-start","bottom-end"],a=["left","left-start","left-end","center","right","right-start","right-end"];function u(e,t){const o=e.split("-")[t];return o?t>0?"-"+o:o:""}function l(e,t,o,r=0){const{direction:p,arrowSize:i,gap:n,offset:c}=o;if(!s.concat(a).includes(p))throw new Error("direction is invalid!");if(r>=4)throw new Error("not enough space!");let d=p;const h=s.includes(p),g=u(p,0),f=u(p,1),w=[{dirs:["left","right"],reset:"top"+f,popupSpace:d.safeWidth+n+i/2+c[0]},{dirs:["top","bottom"],reset:"left"+f,popupSpace:t.height+n+i/2+c[1]}];console.log(t),r++,console.log(g),console.log(h),console.log(w[Number(h)]);const{dirs:y,reset:m,popupSpace:b}=w[Number(h)],x=y.filter((e=>g===e))[0],v=y.filter((e=>g!==e))[0];return console.log("sameDir",x),console.log("reserveDir",v),console.log("popupSpace",b),console.log("target[sameDir]",e[x]),console.log("target[reserveDir]",e[v]),e[x]<b&&(r++,e[v]>=b?d=p.replace(x,v):(r++,o.direction=m,d=l(e,t,o,r=0))),console.log(d),d}function c(e){return"string"==typeof e?document.getElementById(e)||document.getElementsByClassName(e)[0]||document.querySelector(e):e}function d(e){if("none"===getComputedStyle(e).getPropertyValue("display")){const t=[{key:"display",value:"block",origin:getComputedStyle(e).getPropertyValue("display")},{key:"pointer-events",value:"none",origin:getComputedStyle(e).getPropertyValue("pointer-events")},{key:"visibility",value:"hidden",origin:getComputedStyle(e).getPropertyValue("visibility")},{key:"z-index",value:-999,origin:getComputedStyle(e).getPropertyValue("z-index")}];for(const o of t)e.style[o.key]=o.value;const o=e.getBoundingClientRect();for(const o of t)e.style[o.key]=o.origin;return o}return e.getBoundingClientRect()}function h(e,t){let o=d(e=c(e));if(console.log(o),t){const{target:r,width:p,direction:n,arrowSize:u,gap:l,offset:c}=t;let h=p;if("auto"===p){if(s.includes(n))h=i-o.width>=2*c[0]?h:i-2*c[0];else if(a.includes(n)){const e=c[0]+l+u,t=r.left>r.right?r.left:r.right;h=t-o.width>=e?h:t-e}}else{if(!p||isNaN(p))throw new Error("width is invalid!");h=Number(p)}e.style.setProperty("--popup-width","auto"==h?h:h+"px"),o=d(e)}return{left:o.left,right:i-o.right,top:o.top,bottom:n-o.bottom,width:o.width,height:o.height}}function g(e,t){if(!document.getElementById(t)){const o=document.createElement("style");o.id=t,o.type="text/css",document.getElementsByTagName("head")[0].appendChild(o),window.createPopup||o.appendChild(document.createTextNode(""));const r=document.styleSheets[document.styleSheets.length-1];for(let t=0;t<e.length;t++){let o=e[t],p=o[0],i="",n=1;for("[object Array]"===Object.prototype.toString.call(o[1][0])&&(o=o[1],n=0);n<o.length;n++){let e=o[n];i+=`${e[0]}:${e[1]}${e[2]?" !important":""};\n`}r.insertRule?r.insertRule(p+"{"+i+"}",r.cssRules.length):r.addRule(p,i,-1)}}}const f=class{constructor(e,t,o={}){e&&t&&(this.popup=c(t),this.target=c(e),this.options=o,g([r.popup],"ease-popup"),this.options.useCache&&(this.state=0,this.styles={}),this.applyStyle(this.computeStyle()))}computeStyle(){if(this.options.useCache){if(console.log("useCache"),this.state>=2)return this.styles;this.state++}const e=function(e){const t=Object.assign({},o,e);return t.needArrow||(t.arrowSize=0),t.theme&&(p[t.theme]?(t.background=p[t.theme].background,t.color=p[t.theme].color):"object"==typeof t.theme&&(t.background=t.theme.background,t.color=t.theme.color)),t}(this.options),t=h(this.target),u=h(this.popup,{...e,target:t}),c=l(t,u,e),{popupX:d,arrowX:f}=function(e,t,o){const{direction:r,gap:p,arrowSize:n,offset:u}=o,{left:l,width:c}=e,d={popupX:0,arrowX:0};return s.includes(r)&&(d.popupX=l+c/2-t/2,d.arrowX=t/2-n/2,r.includes("start")?(d.popupX=l,d.arrowX=c/2-n/2):r.includes("end")&&(d.popupX=l+c-t,d.arrowX=t-c/2-n/2),d.popupX<u[0]&&(d.popupX=u[0],d.arrowX=l-u[0]+c/2-n/2),d.popupX+t>i-u[0]&&(d.popupX=i-t-u[0],d.arrowX=l-d.popupX+c/2-n/2)),a.includes(r)&&(r.includes("left")?(d.popupX=l-t-p-n,d.arrowX=t-n/2):r.includes("right")&&(d.popupX=l+c+p+n,d.arrowX=-n/2)),d}(t,u.width,e),{popupY:w,arrowY:y}=function(e,t,o){const{direction:r,gap:p,arrowSize:i,offset:u}=o,l={popupY:0,arrowY:0};let c=e.top,d=e.height;return s.includes(r)&&(r.includes("top")?(l.popupY=c-t-p-i,l.arrowY=t-i/2):r.includes("bottom")&&(l.popupY=c+d+p+i,l.arrowY=-i/2)),a.includes(r)&&(e.top<u[1]&&(c=u[1]),e.bottom<u[1]&&(c-=u[1]),l.popupY=c+d/2-t/2,l.arrowY=c-l.popupY+d/2-i/2,r.includes("start")?(l.popupY=c,l.arrowY=d/2-i/2):r.includes("end")&&(l.popupY=c+d-t,l.arrowY=t-d/2-i/2),l.popupY<u[1]&&(l.popupY=u[1],l.arrowY=c-l.popupY+d/2-i/2),l.popupY+t>n-u[1]&&(l.popupY=n-u[1]-t,l.arrowY=c-l.popupY+d/2-i/2)),l}(t,u.height,e),m={"--popup-x":`${d}px`,"--popup-y":`${w}px`,"--popup-width":`${u.width}px`,"--popup-background":`${e.background}`,"--popup-color":`${e.color}`};return e.needArrow&&(this.popup.classList.add("arrow-popup"),g([r.arrow],"ease-popup-arrow"),m["--arrow-x"]=`${f}px`,m["--arrow-y"]=`${y}px`,m["--arrow-size"]=`${e.arrowSize}px`,m["--arrow-rotate"]=`${function(e){let t=0;return s.includes(e)&&(t=e.includes("top")?-45:135),a.includes(e)&&(t=e.includes("left")?225:45),t}(c)}deg`),this.options.direction=c,m}applyStyle(e){for(let t in e)this.popup.style.setProperty(t,e[t]);return this.styles&&(this.styles=e),e}update(){this.applyStyle(this.computeStyle())}show(){this.update(),this.popup.style.display="block"}hide(){this.popup.style.display="none"}};EasePopup=t.default})();
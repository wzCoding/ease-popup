var EasePopup;(()=>{"use strict";var t={d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>b});const o={direction:"top",width:"auto",content:"",placement:"outside",useCache:!1,needArrow:!0,arrowSize:10,targetGap:5,boundryGap:[10,10],theme:"light"},r={popup:[".ease-popup",["display","none"],["position","absolute"],["box-sizing","border-box"],["padding","8px"],["box-shadow","0px 0px 6px rgba(0, 0, 0, 0.2)"],["border-radius","4px"],["border","none"],["outline","none"]],arrow:[".ease-popup .ease-popup-arrow",["display","block"],["position","absolute"],["background-color"," inherit"],["box-shadow","-1px 1px 1px rgba(0, 0, 0, 0.1)"]]},p={light:{background:"#ffffff",color:"#333333"},dark:{background:"#333333",color:"#ffffff"}},n=["top","top-start","top-end","center","bottom","bottom-start","bottom-end"],i=["left","left-start","left-end","center","right","right-start","right-end"];function s(){return{rootWidth:document.documentElement.clientWidth,rootHeight:document.documentElement.clientHeight}}function l(){const t=[...document.querySelectorAll("*")].map((t=>"auto"!==getComputedStyle(t).zIndex));return t.length>0?Math.max(...t)+1:0}function u(t,e){const o=t.split("-")[e];return o?e>0?"-"+o:o:""}function a(t,e,o,r=0){const{direction:p,arrowSize:s,targetGap:l,boundryGap:c}=o;if(!n.concat(i).includes(p))throw new Error("direction is invalid!");if(r>=4)throw new Error("not enough space!");let d=p;const h=n.includes(d),g=u(d,0),f=u(d,1),y=[{defaults:["left","right"],reset:"top"+f,popupSpace:e.width+l+s/2+c[0]},{defaults:["top","bottom"],reset:"left"+f,popupSpace:e.height+l+s/2+c[1]}];r++;const{defaults:w,reset:m,popupSpace:b}=y[Number(h)],x=w.filter((t=>g===t))[0],S=w.filter((t=>g!==t))[0];return t[x]<b&&(r++,t[S]>=b?d=d.replace(x,S):(r++,o.direction=m,d=a(t,e,o,r=0))),d}function c(t){return Object.prototype.toString.call(t).replace("object ","").match(/\w+/g)[0].toLowerCase()}function d(t){let e;return"string"===c(t)&&(e=document.getElementById(t)||document.getElementsByClassName(t)[0]||document.querySelector(t)),c(t).includes("element")&&(e=t),e}function h(t){if("none"===getComputedStyle(t).getPropertyValue("display")){const e=[{key:"display",value:"block",origin:getComputedStyle(t).getPropertyValue("display")},{key:"pointer-events",value:"none",origin:getComputedStyle(t).getPropertyValue("pointer-events")},{key:"visibility",value:"hidden",origin:getComputedStyle(t).getPropertyValue("visibility")},{key:"z-index",value:-999,origin:getComputedStyle(t).getPropertyValue("z-index")}];for(const o of e)t.style[o.key]=o.value;const o=t.getBoundingClientRect();for(const o of e)t.style[o.key]=o.origin;return o}return t.getBoundingClientRect()}function g(t,e){t=d(t);const{rootWidth:o,rootHeight:r}=s(),{top:p,right:l,bottom:u,left:a,height:c,width:g}=h(t);let f=g;if(e){const{target:r,width:p,direction:s,arrowSize:l,targetGap:u,boundryGap:a}=e;if("auto"===p){if(n.includes(s))f=o-f>=2*a[0]?f:o-2*a[0];else if(i.includes(s)){const t=a[0]+u+l,e=r.left>r.right?r.left:r.right;f=e-f>=t?f:e-t}}else{if(!p||isNaN(p))throw new Error("width is invalid!");f=Number(p)}t.style.setProperty("width",`${f}px`),f=h(t).width}return{top:p,right:o-l,bottom:r-u,left:a,width:f,height:c}}function f(t){const e="ease-popup-modal",o=l()+2;let r=document.querySelector(`.${e}`);return r?r.style.display=t?"block":"none":(r=document.createElement("div"),r.className=e,r.style.backgroundColor="rgba(0,0,0,0.1)",r.style.zIndex=o,r.style.position="fixed",r.style.inset="0",r.style.display="block",document.body.appendChild(r)),o}function y(t,e){return(t=d(t))||(t=function(t){let e=document.createElement("dialog");if(!e.show&&"function"!==c(e.show)){const t={open:{value:!1,writable:!0,configurable:!1},show:{value:function(t){this.open=!0,this.style.display="block",t&&this.style.setProperty("--popup-zIndex",t+1)},writable:!1,configurable:!1},showModal:{value:function(){const t=f(this.open);this.show(t)},writable:!1,configurable:!1},close:{value:function(){this.open=!1,this.style.display="none",f(this.open)},writable:!1,configurable:!1}};e=document.createElement("div"),Object.defineProperties(e,t)}return e.className="ease-popup",e.innerHTML=t.content,document.body.appendChild(e),e}(e)),t}function w(t){const e=Object.assign({},o,t);return e.needArrow||(e.arrowSize=0),e.theme&&(p[e.theme]?(e.background=p[e.theme].background,e.color=p[e.theme].color):"object"==typeof e.theme&&(e.background=e.theme.background,e.color=e.theme.color)),e}function m(t,e){let o;if(document.getElementById(e))o=document.getElementById(e).sheet;else{const t=document.createElement("style");t.id=e,t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),window.createPopup||t.appendChild(document.createTextNode("")),o=document.styleSheets[document.styleSheets.length-1]}for(let e=0;e<t.length;e++){let r=t[e],p=r[0];if([...o.rules].filter((t=>t.selectorText===p)).length)break;let n=1,i="";for("[object Array]"===Object.prototype.toString.call(r[1][0])&&(r=r[1],n=0);n<r.length;n++){let t=r[n];i+=`${t[0]}:${t[1]}${t[2]?" !important":""};\n`}o.insertRule?o.insertRule(p+"{"+i+"}",o.cssRules.length):o.addRule(p,i,-1)}}const b=class{constructor(t,e,o={}){const p=function(t){console.log(t);let e,o,r,p=[...t];if(!p.length)throw new Error('at least "target" parameter is required');if(e=function(t){if(!(t=d(t)))throw new Error("target parameter is invalid");return t}(p[0]),1===p.length&&(r=w({}),o=y(o,r)),p.length>=2){const t=p[2]?2:1;r=w("object"===c(p[t])?p[t]:{}),o=y(p[1],r),console.log(p[1])}return{target:e,popup:o,options:r}}(arguments);console.log(p),this.target=p.target,this.popup=p.popup,this.options=p.options,this.popup.classList.add("ease-popup"),m([r.popup],"ease-popup"),this.options.useCache&&(this.state=0,this.styles={}),this.update(this.computeStyle())}computeStyle(){if(this.options.useCache){if(console.log("useCache"),this.state>=2)return this.styles;this.state++}const t=g(this.target),e=g(this.popup,{...this.options,target:t}),o=a(t,e,this.options),{popupX:p,arrowX:u}=function(t,e,o){const{rootWidth:r}=s(),{direction:p,targetGap:l,arrowSize:u,boundryGap:a}=o,{left:c,width:d}=t,h={popupX:0,arrowX:0};return n.includes(p)&&(h.popupX=c+d/2-e/2,h.arrowX=e/2-u/2,p.includes("start")?(h.popupX=c,h.arrowX=d/2-u/2):p.includes("end")&&(h.popupX=c+d-e,h.arrowX=e-d/2-u/2),h.popupX<a[0]&&(h.popupX=a[0],h.arrowX=c-a[0]+d/2-u/2),h.popupX+e>r-a[0]&&(h.popupX=r-e-a[0],h.arrowX=c-h.popupX+d/2-u/2)),i.includes(p)&&(p.includes("left")?(h.popupX=c-e-l-u,h.arrowX=e-u/2):p.includes("right")&&(h.popupX=c+d+l+u,h.arrowX=-u/2)),h}(t,e.width,this.options),{popupY:c,arrowY:d}=function(t,e,o){const{rootHeight:r}=s(),{direction:p,targetGap:l,arrowSize:u,boundryGap:a}=o,c={popupY:0,arrowY:0},d=t.height;let h=t.top;return n.includes(p)&&(p.includes("top")?(c.popupY=h-e-l-u,c.arrowY=e-u/2):p.includes("bottom")&&(c.popupY=h+d+l+u,c.arrowY=-u/2)),i.includes(p)&&(t.top<a[1]&&(h=a[1]),t.bottom<a[1]&&(h-=a[1]),c.popupY=h+d/2-e/2,c.arrowY=h-c.popupY+d/2-u/2,p.includes("start")?(c.popupY=h,c.arrowY=d/2-u/2):p.includes("end")&&(c.popupY=h+d-e,c.arrowY=e-d/2-u/2),c.popupY<a[1]&&(c.popupY=a[1],c.arrowY=h-c.popupY+d/2-u/2),c.popupY+e>r-a[1]&&(c.popupY=r-a[1]-e,c.arrowY=h-c.popupY+d/2-u/2)),c}(t,e.height,this.options),h=l()+1,f={top:`${c}px`,left:`${p}px`,width:`${e.width}px`,"background-color":`${this.options.background}`,color:`${this.options.color}`,"z-index":`${h}`};return this.options.needArrow&&(m([r.arrow],"ease-popup"),function(t,e){const o="ease-popup-arrow";let r=t.querySelector(`.${o}`);r||(r=document.createElement("span"),r.classList.add(o),t.appendChild(r));let p=0;const{safeDirection:s,arrowSize:l,arrowX:u,arrowY:a}=e;n.includes(s)&&(p=s.includes("top")?-45:135),i.includes(s)&&(p=s.includes("left")?225:45),r.style.transform=`rotate(${p}deg)`,r.style.top=`${a}px`,r.style.left=`${u}px`,r.style.width=`${l}px`,r.style.height=`${l}px`,r.style.zIndex=t.style.zIndex-1,t.classList.add("arrow")}(this.popup,{safeDirection:o,arrowSize:this.options.arrowSize,arrowX:u,arrowY:d})),this.options.direction=o,f}update(t){for(let e in t)this.popup.style.setProperty(e,t[e]);return this.styles&&(this.styles=t),t}show(){this.update(this.computeStyle()),this.popup.show&&"function"==typeof this.popup.show&&this.popup.show(),this.popup.style.display="block"}showModal(){this.popup.showModal&&"function"==typeof this.popup.showModal&&this.popup.showModal(),this.popup.style.display="block"}hide(){this.popup.close&&"function"==typeof this.popup.close&&this.popup.show(),this.popup.style.display="none"}};EasePopup=e.default})();
//# sourceMappingURL=EasePopup.js.map
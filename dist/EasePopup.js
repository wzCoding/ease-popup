var EasePopup;(()=>{"use strict";var t={d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>w});const o={direction:"top",width:"auto",placement:"outside",useCache:!1,needArrow:!0,arrowSize:10,gap:5,offset:[10,10],theme:"light",transition:{enter:"animate__animated animate__fadeIn",leave:"animate__animated animate__fadeOut"}},r={popup:[".popup",["position","absolute"],["z-index","2"],["inset","0 0 auto"],["box-shadow","0px 0px 6px rgba(0, 0, 0, 0.2)"],["border-radius","4px"],["padding","8px"],["background-color","var(--popup-background)"],["color","var(--popup-text)"],["max-width","var(--popup-width)"],["display","none"],["transform","translate(var(--popup-x), var(--popup-y))"],["box-sizing","border-box"]],arrow:[".popup.arrow-popup::after",["content","''"],["display","block"],["z-index","-1"],["position","absolute"],["left","var(--arrow-x)"],["top","var(--arrow-y)"],["background-color","var(--popup-background)"],["width","var(--arrow-size)"],["height","var(--arrow-size)"],["transform"," rotate(var(--arrow-rotate))"],["box-shadow","-1px 1px 1px rgba(0, 0, 0, 0.1)"]]},p={light:{background:"#ffffff",color:"#333333"},dark:{background:"#333333",color:"#ffffff"}},i=window.innerWidth,n=window.innerHeight,a=["top","top-start","top-end","center","bottom","bottom-start","bottom-end"],s=["left","left-start","left-end","center","right","right-start","right-end"];function u(t,e){const o=t.split("-")[e];return o?e>0?"-"+o:o:""}function h(t,e,o,r,p=0){if(!a.concat(s).includes(o))throw new Error("direction is invalid!");if(p>=4)throw new Error("not enough space!");const{gap:i,arrowSize:n,offset:d}=r,l=a.includes(o)?"vertical":"horizontal",c=u(o,1),w={vertical:{trends:["top","bottom"],backup:"left"+c,popupSpace:e.height+i+n+d[1]},horizontal:{trends:["left","right"],backup:"top"+c,popupSpace:e.width+i+n+d[0]}};p++;let g=o;const{trends:f,backup:y,popupSpace:m}=w[l],{sameDir:b,reserveDir:v,sameSpace:x,reserveSpace:S}=function(t,e,o){const r=u(e,0),p=o.filter((t=>r===t))[0],i=o.filter((t=>r!==t))[0];return{sameDir:p,reserveDir:i,sameSpace:t[p],reserveSpace:t[i]}}(t,o,f);return x<m&&(p++,g=S>m?o.replace(b,v):h(t,e,y,r,++p)),g}function d(t){return"string"==typeof t?document.getElementById(t)||document.getElementsByClassName(t)[0]||document.querySelector(t):t}function l(t){t=d(t);let{left:e,top:o,right:r,bottom:p,width:a,height:s}=function(t){if("none"===getComputedStyle(t).getPropertyValue("display")){const e=[{key:"display",value:"block",origin:getComputedStyle(t).getPropertyValue("display")},{key:"pointer-events",value:"none",origin:getComputedStyle(t).getPropertyValue("pointer-events")},{key:"visibility",value:"hidden",origin:getComputedStyle(t).getPropertyValue("visibility")},{key:"z-index",value:-999,origin:getComputedStyle(t).getPropertyValue("z-index")}];for(const o of e)t.style[o.key]=o.value;const o=t.getBoundingClientRect();for(const o of e)t.style[o.key]=o.origin;return o}return t.getBoundingClientRect()}(t);return{left:e,right:i-r,top:o,bottom:n-p,width:a,height:s}}function c(t,e){if(!document.getElementById(e)){const o=document.createElement("style");o.id=e,o.type="text/css",document.getElementsByTagName("head")[0].appendChild(o),window.createPopup||o.appendChild(document.createTextNode(""));const r=document.styleSheets[document.styleSheets.length-1];for(let e=0;e<t.length;e++){let o=t[e],p=o[0],i="",n=1;for("[object Array]"===Object.prototype.toString.call(o[1][0])&&(o=o[1],n=0);n<o.length;n++){let t=o[n];i+=`${t[0]}:${t[1]}${t[2]?" !important":""};\n`}r.insertRule?r.insertRule(p+"{"+i+"}",r.cssRules.length):r.addRule(p,i,-1)}}}const w=class{constructor(t,e,o={}){t&&e&&(this.popup=d(e),this.target=d(t),this.options=o,c([r.popup],"ease-popup"),this.options.useCache&&(this.state=0,this.styles={}),this.applyStyle(this.computeStyle()))}computeStyle(){if(this.options.useCache){if(console.log("useCache"),this.state>=2)return this.styles;this.state++}const{direction:t,width:e,needArrow:d,offset:w,gap:g,arrowSize:f,background:y,color:m}=function(t){const e=Object.assign({},o,t);return e.needArrow||(e.arrowSize=0),e.theme&&(p[e.theme]?(e.background=p[e.theme].background,e.color=p[e.theme].color):"object"==typeof e.theme&&(e.background=e.theme.background,e.color=e.theme.color)),e}(this.options),b=l(this.target),v=l(this.popup,w.offsetX),x={offset:w,gap:g,arrowSize:f},S=h(b,v,t,x),{popupX:X,width:k,arrowX:Y}=function(t,e,o,r){const{gap:p,arrowSize:n,offset:h}=r,d={popupX:0,width:e.width,arrowX:0};if(a.includes(o)){const r=2*h[0];d.width=i-e.width>=r?e.width:i-r,d.popupX=t.left+t.width/2-d.width/2,d.arrowX=d.width/2-n/2,o.includes("start")?(d.popupX=t.left,d.arrowX=t.width/2-n/2):o.includes("end")&&(d.popupX=t.left+t.width-d.width,d.arrowX=d.width-t.width/2-n/2),d.popupX<h[0]&&(d.popupX=h[0],d.arrowX=t.left-h[0]+t.width/2-n/2,d.arrowX<0&&(d.arrowX=2)),d.popupX+d.width>i-h[0]&&(d.popupX=i-d.width-h[0],d.arrowX=t.left-d.popupX+t.width/2-n/2,d.arrowX+n>d.width&&(d.arrowX=d.width-n-2))}if(s.includes(o)){const r=u(o,0),i=p+h[0],a=p+n;d.width=t[r]-i>=e.width?e.width:t[r]-i,o.includes("left")?(d.popupX=t.left-d.width-a,d.arrowX=d.width-n/2):o.includes("right")&&(d.popupX=t.left+t.width+a,d.arrowX=-n/2)}return d}(b,v,S,x),{popupY:z,arrowY:C}=function(t,e,o,r){const{gap:p,arrowSize:i,offset:u}=r,h={popupY:0,height:e.height,arrowY:0};let d=t.top;return t.top<u[1]&&(d=u[1]),t.bottom<u[1]&&(d=n-u[1]-e.height),a.includes(o)&&(o.includes("top")?(h.popupY=d-h.height-p-i,h.arrowY=h.height-i/2):o.includes("bottom")&&(h.popupY=d+t.height+p+i,h.arrowY=-i/2)),s.includes(o)&&(h.popupY=t.top+t.height/2-h.height/2,h.arrowY=t.top-h.popupY+t.height/2-i/2,o.includes("start")?(h.popupY=t.top,h.arrowY=t.height/2-i/2):o.includes("end")&&(h.popupY=t.top+t.height-h.height,h.arrowY=h.height-t.height/2-i/2),h.popupY<u[1]&&(h.popupY=u[1],h.arrowY=t.top-h.popupY+t.height/2-i/2),h.popupY+h.height>n-u[1]&&(h.popupY=n-u[1]-h.height,h.arrowY=t.top-h.popupY+t.height/2-i/2,h.arrowY+i>h.height&&(h.arrowY=h.height-i-2))),h}(b,v,S,x),$={"--popup-x":`${X}px`,"--popup-y":`${z}px`,"--popup-width":`${k}px`,"--popup-background":`${y}`,"--popup-color":`${m}`};return d&&(this.popup.classList.add("arrow-popup"),c([r.arrow],"ease-popup-arrow"),$["--arrow-x"]=`${Y}px`,$["--arrow-y"]=`${C}px`,$["--arrow-size"]=`${f}px`,$["--arrow-rotate"]=`${function(t){let e=0;return a.includes(t)&&(e=t.includes("top")?-45:135),s.includes(t)&&(e=t.includes("left")?225:45),e}(S)}deg`),this.options.direction=S,$}applyStyle(t){for(let e in t)this.popup.style.setProperty(e,t[e]);return this.styles&&(this.styles=t),t}update(){this.applyStyle(this.computeStyle())}show(){this.update(),this.popup.style.display="block"}hide(){this.popup.style.display="none"}};EasePopup=e.default})();
var EasePopup;(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>f});const o={direction:"top",maxWidth:"auto",placement:"outside",useCache:!1,needArrow:!0,arrowSize:10,gap:5,offset:[10,10],theme:"light",transition:{enter:"animate__animated animate__fadeIn",leave:"animate__animated animate__fadeOut"}},r={popup:[".popup",["position","absolute"],["z-index","2"],["inset","0 0 auto"],["box-shadow","0px 0px 6px rgba(0, 0, 0, 0.2)"],["border-radius","4px"],["padding","8px"],["background-color","var(--popup-background)"],["color","var(--popup-text)"],["max-width","var(--popup-width)"],["display","none"],["transform","translate(var(--popup-x), var(--popup-y))"],["box-sizing","border-box"]],arrow:[".popup.arrow-popup::after",["content","''"],["display","block"],["z-index","-1"],["position","absolute"],["left","var(--arrow-x)"],["top","var(--arrow-y)"],["background-color","var(--popup-background)"],["width","var(--arrow-size)"],["height","var(--arrow-size)"],["transform"," rotate(var(--arrow-rotate))"],["box-shadow","-1px 1px 1px rgba(0, 0, 0, 0.1)"]]},p={light:{background:"#ffffff",color:"#333333"},dark:{background:"#333333",color:"#ffffff"}},i=window.innerWidth,n=window.innerHeight,a=["top","top-start","top-end","center","bottom","bottom-start","bottom-end"],s=["left","left-start","left-end","center","right","right-start","right-end"];function u(e,t){const o=e.split("-")[t];return o?t>0?"-"+o:o:""}function l(e){const{target:t,popup:o,maxWidth:r,direction:p,arrowSize:n,gap:u,offset:l}=e;let c=o.width;if("auto"===r){if(a.includes(p))c=i-c>=2*l[0]?c:i-2*l[0];else if(s.includes(p)){const{left:e,right:o}=t,r=e>o?e:o,p=l[0]+u+n/2;c=r-c>=p?c:r-p,console.log(c)}}else{if(!r||isNaN(r))throw new Error("maxWidth is invalid!");c=Number(r)}return c}function c(e,t,o,r=0){const{direction:p,arrowSize:i,gap:n,offset:d}=o;if(!a.concat(s).includes(p))throw new Error("direction is invalid!");if(r>=4)throw new Error("not enough space!");let h={safeDirection:p,safeWidth:l({...o,target:e,popup:t})};const g=a.includes(p),f=u(p,0),w=u(p,1),y=[{dirs:["left","right"],reset:"top"+w,popupSpace:h.safeWidth+n+i/2+d[0]},{dirs:["top","bottom"],reset:"left"+w,popupSpace:t.height+n+i/2+d[1]}];r++,console.log(f),console.log(g),console.log(y[Number(g)]);const{dirs:m,reset:b,popupSpace:x}=y[Number(g)],v=m.filter((e=>f===e))[0],S=m.filter((e=>f!==e))[0];return console.log("sameDir",v),console.log("reserveDir",S),console.log("popupSpace",x),console.log("target[sameDir]",e[v]),console.log("target[reserveDir]",e[S]),e[v]<x&&(r++,e[S]>=x?h.safeDirection=p.replace(v,S):(r++,o.direction=b,h=c(e,t,o,r=0))),console.log(h),h}function d(e){return"string"==typeof e?document.getElementById(e)||document.getElementsByClassName(e)[0]||document.querySelector(e):e}function h(e){e=d(e);const{left:t,top:o,right:r,bottom:p,width:a,height:s}=function(e){if("none"===getComputedStyle(e).getPropertyValue("display")){const t=[{key:"display",value:"block",origin:getComputedStyle(e).getPropertyValue("display")},{key:"pointer-events",value:"none",origin:getComputedStyle(e).getPropertyValue("pointer-events")},{key:"visibility",value:"hidden",origin:getComputedStyle(e).getPropertyValue("visibility")},{key:"z-index",value:-999,origin:getComputedStyle(e).getPropertyValue("z-index")}];for(const o of t)e.style[o.key]=o.value;const o=e.getBoundingClientRect();for(const o of t)e.style[o.key]=o.origin;return o}return e.getBoundingClientRect()}(e);return{left:t,right:i-r,top:o,bottom:n-p,width:a,height:s}}function g(e,t){if(!document.getElementById(t)){const o=document.createElement("style");o.id=t,o.type="text/css",document.getElementsByTagName("head")[0].appendChild(o),window.createPopup||o.appendChild(document.createTextNode(""));const r=document.styleSheets[document.styleSheets.length-1];for(let t=0;t<e.length;t++){let o=e[t],p=o[0],i="",n=1;for("[object Array]"===Object.prototype.toString.call(o[1][0])&&(o=o[1],n=0);n<o.length;n++){let e=o[n];i+=`${e[0]}:${e[1]}${e[2]?" !important":""};\n`}r.insertRule?r.insertRule(p+"{"+i+"}",r.cssRules.length):r.addRule(p,i,-1)}}}const f=class{constructor(e,t,o={}){e&&t&&(this.popup=d(t),this.target=d(e),this.options=o,g([r.popup],"ease-popup"),this.options.useCache&&(this.state=0,this.styles={}),this.applyStyle(this.computeStyle()))}computeStyle(){if(this.options.useCache){if(console.log("useCache"),this.state>=2)return this.styles;this.state++}const e=function(e){const t=Object.assign({},o,e);return t.needArrow||(t.arrowSize=0),t.theme&&(p[t.theme]?(t.background=p[t.theme].background,t.color=p[t.theme].color):"object"==typeof t.theme&&(t.background=t.theme.background,t.color=t.theme.color)),t}(this.options),t=h(this.target),u=h(this.popup),{safeDirection:l,safeWidth:d}=c(t,u,e),{popupX:f,arrowX:w}=function(e,t,o){const{direction:r,gap:p,arrowSize:n,offset:u}=o,{left:l,width:c}=e,d={popupX:0,arrowX:0};return a.includes(r)&&(d.popupX=l+c/2-t/2,d.arrowX=t/2-n/2,r.includes("start")?(d.popupX=l,d.arrowX=c/2-n/2):r.includes("end")&&(d.popupX=l+c-t,d.arrowX=t-c/2-n/2),d.popupX<u[0]&&(d.popupX=u[0],d.arrowX=l-u[0]+c/2-n/2),d.popupX+t>i-u[0]&&(d.popupX=i-t-u[0],d.arrowX=l-d.popupX+c/2-n/2)),s.includes(r)&&(r.includes("left")?(d.popupX=l-t-p-n,d.arrowX=t-n/2):r.includes("right")&&(d.popupX=l+c+p+n,d.arrowX=-n/2)),d}(t,d,e),{popupY:y,arrowY:m}=function(e,t,o){const{direction:r,gap:p,arrowSize:i,offset:u}=o,l={popupY:0,arrowY:0};let c=e.top,d=e.height;return e.top<u[1]&&(c=u[1]),e.bottom<u[1]&&(c=n-d-u[1]),a.includes(r)&&(r.includes("top")?(l.popupY=c-t-p-i,l.arrowY=t-i/2):r.includes("bottom")&&(l.popupY=c+d+p+i,l.arrowY=-i/2)),s.includes(r)&&(l.popupY=c+d/2-t/2,l.arrowY=c-l.popupY+d/2-i/2,r.includes("start")?(l.popupY=c,l.arrowY=d/2-i/2):r.includes("end")&&(l.popupY=c+d-t,l.arrowY=t-d/2-i/2),l.popupY<u[1]&&(l.popupY=u[1],l.arrowY=c-l.popupY+d/2-i/2),l.popupY+t>n-u[1]&&(l.popupY=n-u[1]-t,l.arrowY=c-l.popupY+d/2-i/2)),l}(t,u.height,e),b={"--popup-x":`${f}px`,"--popup-y":`${y}px`,"--popup-width":`${d}px`,"--popup-background":`${e.background}`,"--popup-color":`${e.color}`};return e.needArrow&&(this.popup.classList.add("arrow-popup"),g([r.arrow],"ease-popup-arrow"),b["--arrow-x"]=`${w}px`,b["--arrow-y"]=`${m}px`,b["--arrow-size"]=`${e.arrowSize}px`,b["--arrow-rotate"]=`${function(e){let t=0;return a.includes(e)&&(t=e.includes("top")?-45:135),s.includes(e)&&(t=e.includes("left")?225:45),t}(l)}deg`),this.options.direction=l,b}applyStyle(e){for(let t in e)this.popup.style.setProperty(t,e[t]);return this.styles&&(this.styles=e),e}update(){this.applyStyle(this.computeStyle())}show(){this.update(),this.popup.style.display="block"}hide(){this.popup.style.display="none"}};EasePopup=t.default})();
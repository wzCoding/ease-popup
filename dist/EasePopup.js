var EasePopup;(()=>{"use strict";var t={d:(e,o)=>{for(var p in o)t.o(o,p)&&!t.o(e,p)&&Object.defineProperty(e,p,{enumerable:!0,get:o[p]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>g});const o={direction:"top",maxWidth:"auto",placement:"outside",useCache:!1,needArrow:!0,arrowSize:10,gap:5,offset:[10,10],theme:"light",transition:{enter:"animate__animated animate__fadeIn",leave:"animate__animated animate__fadeOut"}},p={popup:[".popup",["position","absolute"],["z-index","2"],["inset","0 0 auto"],["box-shadow","0px 0px 6px rgba(0, 0, 0, 0.2)"],["border-radius","4px"],["padding","8px"],["background-color","var(--popup-background)"],["color","var(--popup-text)"],["max-width","var(--popup-width)"],["display","none"],["transform","translate(var(--popup-x), var(--popup-y))"],["box-sizing","border-box"]],arrow:[".popup.arrow-popup::after",["content","''"],["display","block"],["z-index","-1"],["position","absolute"],["left","var(--arrow-x)"],["top","var(--arrow-y)"],["background-color","var(--popup-background)"],["width","var(--arrow-size)"],["height","var(--arrow-size)"],["transform"," rotate(var(--arrow-rotate))"],["box-shadow","-1px 1px 1px rgba(0, 0, 0, 0.1)"]]},r={light:{background:"#ffffff",color:"#333333"},dark:{background:"#333333",color:"#ffffff"}},i=window.innerWidth,n=window.innerHeight,a=["top","top-start","top-end","center","bottom","bottom-start","bottom-end"],s=["left","left-start","left-end","center","right","right-start","right-end"];function u(t,e){return t.split("-")[e]||""}function l(t,e,o,p,r=0){if(!a.concat(s).includes(o))throw new Error("direction is invalid!");if(r>=4)throw new Error("not enough space!");const{gap:i,arrowSize:n,offset:d}=p,h=a.includes(o)?"vertical":"horizontal",c=u(o,1),g={vertical:{trends:["top","bottom"],backup:"left"+c,popupSpace:e.height+i+n+d[1]},horizontal:{trends:["left","right"],backup:"top"+c,popupSpace:e.width+i+n+d[0]}};r++;let w=o;const{trends:f,backup:y,popupSpace:m}=g[h],{sameDir:b,reserveDir:x,sameSpace:v,reserveSpace:S}=function(t,e,o){const p=u(e,0),r=o.filter((t=>p===t))[0],i=o.filter((t=>p!==t))[0];return{sameDir:r,reserveDir:i,sameSpace:t[r],reserveSpace:t[i]}}(t,o,f);return v<m&&(r++,w=S>m?o.replace(b,x):l(t,e,y,p,++r)),w}function d(t){return"string"==typeof t?document.getElementById(t)||document.getElementsByClassName(t)[0]||document.querySelector(t):t}function h(t,e,o){t=d(t);let{left:p,top:r,right:a,bottom:s,width:u,height:l}=function(t){if("none"===getComputedStyle(t).getPropertyValue("display")){const e=[{key:"display",value:"block",origin:getComputedStyle(t).getPropertyValue("display")},{key:"pointer-events",value:"none",origin:getComputedStyle(t).getPropertyValue("pointer-events")},{key:"visibility",value:"hidden",origin:getComputedStyle(t).getPropertyValue("visibility")},{key:"z-index",value:-999,origin:getComputedStyle(t).getPropertyValue("z-index")}];for(const o of e)t.style[o.key]=o.value;const o=t.getBoundingClientRect();for(const o of e)t.style[o.key]=o.origin;return o}return t.getBoundingClientRect()}(t);return e&&(u="auto"==e?i-u>=2*o?u:i-2*o:Number(e)),{left:p,right:i-a,top:r,bottom:n-s,width:u,height:l}}function c(t,e){if(!document.getElementById(e)){const o=document.createElement("style");o.id=e,o.type="text/css",document.getElementsByTagName("head")[0].appendChild(o),window.createPopup||o.appendChild(document.createTextNode(""));const p=document.styleSheets[document.styleSheets.length-1];for(let e=0;e<t.length;e++){let o=t[e],r=o[0],i="",n=1;for("[object Array]"===Object.prototype.toString.call(o[1][0])&&(o=o[1],n=0);n<o.length;n++){let t=o[n];i+=`${t[0]}:${t[1]}${t[2]?" !important":""};\n`}p.insertRule?p.insertRule(r+"{"+i+"}",p.cssRules.length):p.addRule(r,i,-1)}}}const g=class{constructor(t,e,o={}){t&&e&&(this.popup=d(e),this.target=d(t),this.options=o,c([p.popup],"ease-popup"),this.options.useCache&&(this.state=0,this.styles={}),this.applyStyle(this.computeStyle()))}computeStyle(){if(this.options.useCache){if(console.log("useCache"),this.state>=2)return this.styles;this.state++}const{direction:t,maxWidth:e,needArrow:d,offset:g,gap:w,arrowSize:f,background:y,color:m}=function(t){const e=Object.assign({},o,t);return console.log(e),e.needArrow||(e.arrowSize=0),e.theme&&(r[e.theme]?(e.background=r[e.theme].background,e.color=r[e.theme].color):"object"==typeof e.theme&&(e.background=e.theme.background,e.color=e.theme.color)),e}(this.options),b=h(this.target),x=h(this.popup,e,g.offsetX),v={offset:g,gap:w,arrowSize:f},S=l(b,x,t,v),{popupX:k,width:X,arrowX:Y}=function(t,e,o,p){const{gap:r,arrowSize:n,offset:l}=p,d={popupX:0,width:e.width,arrowX:0};if(a.includes(o)){const p=2*l[0];d.width=i-e.width>=p?e.width:i-p,d.popupX=t.left+t.width/2-d.width/2,d.arrowX=d.width/2-n/2,o.includes("start")?(d.popupX=t.left,d.arrowX=t.width/2-n/2):o.includes("end")&&(d.popupX=t.left+t.width-d.width,d.arrowX=d.width-t.width/2-n/2),d.popupX<l[0]&&(d.popupX=l[0],d.arrowX=t.left-l[0]+t.width/2-n/2),d.popupX+d.width>i-l[0]&&(d.popupX=i-d.width-l[0],d.arrowX=t.left-d.popupX+t.width/2-n/2)}if(s.includes(o)){const p=u(o,0),i=r+l[0],a=r+n;d.width=t[p]-i>=e.width?e.width:t[p]-i,o.includes("left")?(d.popupX=t.left-d.width-a,d.arrowX=d.width-n/2):o.includes("right")&&(d.popupX=t.left+t.width+a,d.arrowX=-n/2)}return d}(b,x,S,v),{popupY:z,arrowY:C}=function(t,e,o,p){const{gap:r,arrowSize:i,offset:u}=p,l={popupY:0,height:e.height,arrowY:0};let d=t.top;return t.top<u[1]&&(d=u[1]),t.bottom<u[1]&&(d=n-u[1]-e.height),a.includes(o)&&(o.includes("top")?(l.popupY=d-l.height-r-i,l.arrowY=l.height-i/2):o.includes("bottom")&&(l.popupY=d+t.height+r+i,l.arrowY=-i/2)),s.includes(o)&&(l.popupY=t.top+t.height/2-l.height/2,l.arrowY=t.top-l.popupY+t.height/2-i/2,o.includes("start")?(l.popupY=t.top,l.arrowY=t.height/2):o.includes("end")&&(l.popupY=t.top+t.height-l.height,l.arrowY=l.height-t.height/2-i/2),l.popupY<u[1]&&(l.popupY=u[1],l.arrowY=t.top-u[1]+i),l.popupY+l.height>n-u[1]&&(l.popupY=n-u[1]-l.height,l.arrowY=t.top-l.popupY+i)),l}(b,x,S,v),$={"--popup-x":`${k}px`,"--popup-y":`${z}px`,"--popup-width":`${X}px`,"--popup-background":`${y}`,"--popup-color":`${m}`};return d&&(this.popup.classList.add("arrow-popup"),c([p.arrow],"ease-popup-arrow"),$["--arrow-x"]=`${Y}px`,$["--arrow-y"]=`${C}px`,$["--arrow-size"]=`${f}px`,$["--arrow-rotate"]=`${function(t){let e=0;return a.includes(t)&&(e=t.includes("top")?-45:135),s.includes(t)&&(e=t.includes("left")?225:45),e}(S)}deg`),this.options.direction=S,$}applyStyle(t){for(let e in t)this.popup.style.setProperty(e,t[e]);return this.styles&&(this.styles=t),t}update(){this.applyStyle(this.computeStyle())}show(){this.update(),this.popup.style.display="block"}hide(){this.popup.style.display="none"}};EasePopup=e.default})();
var EasePopup;(()=>{"use strict";var t={d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>w});const o={direction:"top",width:"auto",content:"",placement:"outside",useCache:!1,needArrow:!0,arrowSize:10,targetGap:5,boundryGap:[10,10],theme:"light",transition:{enter:"fade-in",leave:"fade-out"}},r={popup:[".ease-popup",["display","none"],["position","absolute"],["box-sizing","border-box"],["left","var(--popup-x)"],["top","var(--popup-y)"],["width","var(--popup-width)"],["padding","8px"],["color","var(--popup-color)"],["background-color","var(--popup-background)"],["box-shadow","0px 0px 6px rgba(0, 0, 0, 0.2)"],["border-radius","4px"],["z-index","var(--popup-zIndex)",!0]],arrow:[".ease-popup.arrow::after",["content","''"],["display","block"],["z-index","var(--arrow-zIndex)"],["position","absolute"],["left","var(--arrow-x)"],["top","var(--arrow-y)"],["background-color","var(--popup-background)"],["width","var(--arrow-size)"],["height","var(--arrow-size)"],["transform"," rotate(var(--arrow-rotate))"],["box-shadow","-1px 1px 1px rgba(0, 0, 0, 0.1)"]],enter:[".ease-popup.fade-in",["opacity","1"]],leave:[".ease-popup.fade-out",["opacity","0"]]},p={light:{background:"#ffffff",color:"#333333"},dark:{background:"#333333",color:"#ffffff"}},n=["top","top-start","top-end","center","bottom","bottom-start","bottom-end"],i=["left","left-start","left-end","center","right","right-start","right-end"];function s(){return{rootWidth:document.documentElement.clientWidth,rootHeight:document.documentElement.clientHeight}}function a(t,e){const o=t.split("-")[e];return o?e>0?"-"+o:o:""}function u(t,e,o,r=0){const{direction:p,arrowSize:s,targetGap:l,boundryGap:c}=o;if(!n.concat(i).includes(p))throw new Error("direction is invalid!");if(r>=4)throw new Error("not enough space!");let d=p;const h=n.includes(d),g=a(d,0),f=a(d,1),w=[{defaults:["left","right"],reset:"top"+f,popupSpace:e.width+l+s/2+c[0]},{defaults:["top","bottom"],reset:"left"+f,popupSpace:e.height+l+s/2+c[1]}];r++;const{defaults:y,reset:m,popupSpace:b}=w[Number(h)],x=y.filter((t=>g===t))[0],v=y.filter((t=>g!==t))[0];return t[x]<b&&(r++,t[v]>=b?d=d.replace(x,v):(r++,o.direction=m,d=u(t,e,o,r=0))),d}function l(t){return"string"==typeof t?document.getElementById(t)||document.getElementsByClassName(t)[0]||document.querySelector(t):t}function c(t){if("none"===getComputedStyle(t).getPropertyValue("display")){const e=[{key:"display",value:"block",origin:getComputedStyle(t).getPropertyValue("display")},{key:"pointer-events",value:"none",origin:getComputedStyle(t).getPropertyValue("pointer-events")},{key:"visibility",value:"hidden",origin:getComputedStyle(t).getPropertyValue("visibility")},{key:"z-index",value:-999,origin:getComputedStyle(t).getPropertyValue("z-index")}];for(const o of e)t.style[o.key]=o.value;const o=t.getBoundingClientRect();for(const o of e)t.style[o.key]=o.origin;return o}return t.getBoundingClientRect()}function d(t,e){t=l(t);const{rootWidth:o,rootHeight:r}=s(),{top:p,right:a,bottom:u,left:d,height:h,width:g}=c(t);let f=g;if(e){const{target:r,width:p,direction:s,arrowSize:a,targetGap:u,boundryGap:l}=e;if("auto"===p){if(n.includes(s))f=o-f>=2*l[0]?f:o-2*l[0];else if(i.includes(s)){const t=l[0]+u+a,e=r.left>r.right?r.left:r.right;f=e-f>=t?f:e-t}}else{if(!p||isNaN(p))throw new Error("width is invalid!");f=Number(p)}t.style.setProperty("--popup-width",`${f}px`),f=c(t).width}return{top:p,right:o-a,bottom:r-u,left:d,width:f,height:h}}function h(t,e,o=!0){const r=t=>{let o;return"string"==typeof e[t]?o=e[t]:(o=`ease-popup-${t}`,g([[`.${o}`,e[t]]],"ease-popup")),o},p=r("enter"),n=r("leave");o?new Promise((e=>{t.classList.add(n),t.style.display="block",setTimeout(e,0)})).then((()=>{t.classList.remove(n),t.classList.add(p)})):t.classList.add(n),t.addEventListener("transitionend",(function(){o?t.classList.remove(p):(t.style.display="none",t.classList.remove(n))}),{once:!0})}function g(t,e){let o;if(document.getElementById(e))o=document.getElementById(e).sheet;else{const t=document.createElement("style");t.id=e,t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),window.createPopup||t.appendChild(document.createTextNode("")),o=document.styleSheets[document.styleSheets.length-1]}for(let e=0;e<t.length;e++){let r=t[e],p=r[0];if([...o.rules].filter((t=>t.selectorText===p)).length)break;let n=1,i="";for("[object Array]"===Object.prototype.toString.call(r[1][0])&&(r=r[1],n=0);n<r.length;n++){let t=r[n];i+=`${t[0]}:${t[1]}${t[2]?" !important":""};\n`}o.insertRule?o.insertRule(p+"{"+i+"}",o.cssRules.length):o.addRule(p,i,-1)}}function f(t){return Object.prototype.toString.call(t).replace("object ","").match(/\w+/g)[0].toLowerCase()}const w=class{constructor(t,e,n={}){!function(t){let[e,o]=[...t];if(!e)throw new Error("the target element cannot be missing");if(!f(e).includes("element")&&"string"===f(e)&&!l(e))throw new Error("the target element cannot be missing");o&&(f(o).includes("element")||"string"===f(o)&&l(o)),["element","string"].includes(f(e))}(arguments),this.popup=l(e),this.target=l(t),this.options=function(t){const e=Object.assign({},o,t);return e.needArrow||(e.arrowSize=0),e.theme&&(p[e.theme]?(e.background=p[e.theme].background,e.color=p[e.theme].color):"object"==typeof e.theme&&(e.background=e.theme.background,e.color=e.theme.color)),e}(n),console.log(this.options),this.popup.classList.add("ease-popup");for(const t of["popup","enter","leave"])g([r[t]],"ease-popup");this.options.useCache&&(this.state=0,this.styles={}),this.update(this.computeStyle())}computeStyle(){if(this.options.useCache){if(console.log("useCache"),this.state>=2)return this.styles;this.state++}const t=d(this.target),e=d(this.popup,{...this.options,target:t}),o=u(t,e,this.options),{popupX:p,arrowX:a}=function(t,e,o){const{rootWidth:r}=s(),{direction:p,targetGap:a,arrowSize:u,boundryGap:l}=o,{left:c,width:d}=t,h={popupX:0,arrowX:0};return n.includes(p)&&(h.popupX=c+d/2-e/2,h.arrowX=e/2-u/2,p.includes("start")?(h.popupX=c,h.arrowX=d/2-u/2):p.includes("end")&&(h.popupX=c+d-e,h.arrowX=e-d/2-u/2),h.popupX<l[0]&&(h.popupX=l[0],h.arrowX=c-l[0]+d/2-u/2),h.popupX+e>r-l[0]&&(h.popupX=r-e-l[0],h.arrowX=c-h.popupX+d/2-u/2)),i.includes(p)&&(p.includes("left")?(h.popupX=c-e-a-u,h.arrowX=e-u/2):p.includes("right")&&(h.popupX=c+d+a+u,h.arrowX=-u/2)),h}(t,e.width,this.options),{popupY:l,arrowY:c}=function(t,e,o){const{rootHeight:r}=s(),{direction:p,targetGap:a,arrowSize:u,boundryGap:l}=o,c={popupY:0,arrowY:0},d=t.height;let h=t.top;return n.includes(p)&&(p.includes("top")?(c.popupY=h-e-a-u,c.arrowY=e-u/2):p.includes("bottom")&&(c.popupY=h+d+a+u,c.arrowY=-u/2)),i.includes(p)&&(t.top<l[1]&&(h=l[1]),t.bottom<l[1]&&(h-=l[1]),c.popupY=h+d/2-e/2,c.arrowY=h-c.popupY+d/2-u/2,p.includes("start")?(c.popupY=h,c.arrowY=d/2-u/2):p.includes("end")&&(c.popupY=h+d-e,c.arrowY=e-d/2-u/2),c.popupY<l[1]&&(c.popupY=l[1],c.arrowY=h-c.popupY+d/2-u/2),c.popupY+e>r-l[1]&&(c.popupY=r-l[1]-e,c.arrowY=h-c.popupY+d/2-u/2)),c}(t,e.height,this.options),h=function(){const t=[...document.querySelectorAll("*")].map((t=>"auto"!==getComputedStyle(t).zIndex));return t.length>0?Math.max(...t)+1:0}(),f={"--popup-x":`${p}px`,"--popup-y":`${l}px`,"--popup-width":`${e.width}px`,"--popup-background":`${this.options.background}`,"--popup-color":`${this.options.color}`,"--popup-zIndex":`${h}`};return this.options.needArrow&&(this.popup.classList.add("arrow"),g([r.arrow],"ease-popup"),f["--arrow-x"]=`${a}px`,f["--arrow-y"]=`${c}px`,f["--arrow-size"]=`${this.options.arrowSize}px`,f["--arrow-rotate"]=`${function(t){let e=0;return n.includes(t)&&(e=t.includes("top")?-45:135),i.includes(t)&&(e=t.includes("left")?225:45),e}(o)}deg`,f["--arrow-zIndex"]=""+(h-1)),this.options.direction=o,f}update(t){for(let e in t)this.popup.style.setProperty(e,t[e]);return this.styles&&(this.styles=t),t}show(){this.update(this.computeStyle()),h(this.popup,this.options.transition)}hide(){h(this.popup,this.options.transition,!1)}};EasePopup=e.default})();